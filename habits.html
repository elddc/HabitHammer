<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Habit Hammer</title>
	<link rel="icon" href="icon.png">
	<link rel="stylesheet" href="styles.css"/>
</head>
<body>
<div class="container">
	<div class="nav grid-head">
		<a class="center-verti huge" onclick="window.location.href='index.html'">
			<img src="icon.png" class="logo" alt="logo">
			Habit Hammer
		</a>
		<span>
			<button class="txt-button right white" onclick="logOut()">Log out</button>
		</span>
	</div>
	<ul class="grid-side big white">
		<!--TODO pages + links-->
		<li><a href="">Today</a></li><!--Today/Upcoming/To Do-->
		<li><a href="/">All</a></li>
		<li class="spacer"></li>
		<li><a href="">New</a></li>
		<li><a href="">+ Build</a></li>
		<li><a href="">+ Break</a></li>
		<li class="spacer"></li>
		<li><a href="">History</a></li><!--History/Stats-->
	</ul>
	<div class="grid-main">
		<h1>Today</h1>
		<ul id="today">
		<!-- Template
			<li><div class="habit">
				<button class="circle-button"></button>
				Habit Name
			</div></li>
		-->
		</ul>
	</div>

	<div class="modal-bg" id="popup">
		<div class="modal">
			Info
		</div>
	</div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.9/firebase-firestore.js"></script>

<script>
	var firebaseConfig = {
		apiKey: "AIzaSyBGhVi2ZSQAs3reI07GfNolcSvWO_tSEW4",
		authDomain: "ec-ftest.firebaseapp.com",
		projectId: "ec-ftest",
		storageBucket: "ec-ftest.appspot.com",
		messagingSenderId: "28831555118",
		appId: "1:28831555118:web:4a651dafec45d4a5b609bf"
	};
	firebase.initializeApp(firebaseConfig);
</script>

<script src="auth.js"></script>
<script src="habits.js"></script>
<script>    //move to withing habits.js? or new script file?
	firebase.auth().onAuthStateChanged(user => start(user.uid));

	//alt to onclick="this.style.display='none'" in popup
	//TODO same with circle button?
	window.onclick = function(event) {
		if (event.target == document.getElementById('popup')) {
			document.getElementById('popup').style.display = "none";
		}
	}

	function start(user){
		setUser(user);
		displayHabit('floss');
		//fillExample();
	}

	//generates 3 example habits
	function fillExample(){
		add('floss', buildHabit(
			'put on PJs',
			'floss',
			'brush teeth',
			'brush teeth'));
		add('journal', buildHabit(
			'eat breakfast',
			'write in journal',
			'look at cat photos',
			false,
			['one paragraph', 'one page', 'three pages']));
		add('stop snacking', breakHabit(
			'feel bored',
			'eat candy',
			'sugar',
			'go on a walk',
			['hide candy']));
	}

	function displayHabit(name){
		let out = '<li><div class="habit" id="' + name + '" onclick="showInfo(\'' + name + '\')">';
		out += '<button class="circle-button"></button>'
		out += name;
		out += '</div></li>';

		document.getElementById('today').innerHTML += out;
	}

	async function showInfo(name){
		let habit = await getHabit(name);
		console.log(habit);

		document.getElementById('popup').style.display='grid';
	}
</script>
</body>
</html>
